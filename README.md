# Queue Booking App (FastAPI + Next.js + MariaDB)

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏Ñ‡∏¥‡∏ß‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (MVP) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‚Äî **‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á**

## ‚úÖ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°
- ‡πÅ‡∏Å‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (`__init__.py`) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ FastAPI import ‡πÑ‡∏î‡πâ
- ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ **JWT + ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå Admin** ‡∏Å‡∏±‡∏ö endpoint ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏¥‡∏ß/‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
- ‡πÄ‡∏û‡∏¥‡πà‡∏° **LINE Notify**: ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏¥‡∏ß‡πÉ‡∏´‡∏°‡πà, ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô, ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `LINE_NOTIFY_TOKEN`)
- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ã‡πâ‡∏≥‡∏î‡πâ‡∏ß‡∏¢ **UniqueConstraint(date,start_time,end_time)**
- MySQL ‡πÉ‡∏ä‡πâ **UTF8MB4** ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
- ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏î‡πâ‡∏ß‡∏¢ SQLAlchemy `delete()` ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤ raw SQL
- ‡πÄ‡∏Å‡πá‡∏ö JWT ‡πÉ‡∏ô `localStorage` ‡∏ù‡∏±‡πà‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å
- ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á `.env` ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á
```
queue-booking-app-v2/
‚îú‚îÄ backend/        # FastAPI + SQLModel
‚îú‚îÄ frontend/       # Next.js 14 (App Router)
‚îî‚îÄ docker-compose.yml
```

## ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏ß (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å)
```bash
cd queue-booking-app-v2
docker compose up -d --build
```

- Frontend: http://localhost:3000
- Backend API (Swagger): http://localhost:8000/docs
- Adminer (DB): http://localhost:8080  (Server: `db`, User: `queue_user`, Pass: `queue_pass`, DB: `queue_db`)

> ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Admin (seed): `admin@example.com` / `admin123` (‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á)

## ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ENV
- ‡πÅ‡∏Å‡πâ `backend/.env` ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢:
  - `APP_SECRET` ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ï‡∏£‡∏¥‡∏á‡∏•‡∏±‡∏ö
  - `ADMIN_EMAIL`, `ADMIN_PASSWORD`
  - (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö) `LINE_NOTIFY_TOKEN` ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÑ‡∏•‡∏ô‡πå‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß/‡∏Å‡∏•‡∏∏‡πà‡∏°
- ‡πÅ‡∏Å‡πâ `frontend/.env` ‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡πâ `NEXT_PUBLIC_API_URL` ‡∏ï‡∏≤‡∏°‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ deploy

## ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ ‚Üí ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠/‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå ‚Üí ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô: `/admin` ‚Üí Login ‚Üí ‡πÉ‡∏™‡πà‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ‚Üí ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‚Üí ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å

## API ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
- `GET /appointments/slots?d=YYYY-MM-DD`  ‡∏î‡∏π‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á
- `POST /appointments`  ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏¥‡∏ß (public)
- `GET /appointments` (admin)  ‡∏≠‡πà‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
- `POST /appointments/{id}/confirm` (admin)
- `POST /appointments/{id}/cancel` (admin)
- `GET/POST /settings/business-hours` (admin)
- `GET/POST /settings/holidays` (admin)

## Deploy ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á
- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ Nginx Proxy Manager / Caddy ‡∏ó‡∏≥ HTTPS ‡πÅ‡∏•‡∏∞‡∏û‡∏£‡πá‡∏≠‡∏Å‡∏ã‡∏µ‡πÉ‡∏´‡πâ Frontend/Backend
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ CORS ‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡πâ‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô `backend/.env`
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô DB ‡πÅ‡∏•‡∏∞ `APP_SECRET` ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏õ‡∏£‡∏î‡∏±‡∏Å‡∏ä‡∏±‡∏ô

## ‡∏ï‡πà‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£/‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô (Resource-based slots)
- ‡∏°‡∏±‡∏î‡∏à‡∏≥/‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ (PromptPay QR)
- ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î/‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Admin (UI)

> ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ ‡∏ö‡∏≠‡∏Å‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö üöÄ
"# queue-booking-app-v2" 
